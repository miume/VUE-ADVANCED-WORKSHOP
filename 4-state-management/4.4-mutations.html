<script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>

<div id='app'>
    <counter></counter>
    <counter></counter>
    <counter></counter>
    <button @click="increment">increment</button>
    <button @click="decrement">decrement</button>
</div>

<script>
    function createStore({ state, mutations }) {
        return new Vue({
            data: { state },
            methods: {
                commit (mutationType) {
                    mutations[mutationType](state)
                }
            }
        })
    }

    const store = createStore({
        state: {
            count: 0
        },
        mutations: {
            increment (state) {
                state.count++
            },
            decrement (state) {
                state.count--
            }
        }
    })

    const Counter = {
        render(h) {
            return h('div',store.state.count)
        }
    }

    new Vue({
        el: '#app',
        components: { Counter },
        methods: {
            increment () {
                state.commit('increment')
            },
            decrement () {
                state.commit('decrement')
            }
        }
    })
</script>